{% extends 'dashboard/base.html' %}
{% load static %}
{% load template_filters %}

{% block navigation %}
<a href="{% url 'dashboard-cohort-participants' cohort.id %}" class="nav-link">{{cohort.name}}</a>
<a href="{% url 'dashboard-cohort-participant' cohort.id participant.heartsteps_id %}" class="nav-link active">{{participant.heartsteps_id}}</a>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-sm">
            <h3>Participant Information</h3>
            <dl>
                <dt>HeartSteps ID</dt>
                <dd>{{participant.heartsteps_id}}</dd>
                <dt>Enrollment token</dt>
                <dd>{{participant.enrollment_token}}</dd>
                <dt>Birth year</dt>
                <dd>{{participant.birth_year}}</dd>
            </dl>
            <a href="{% url 'dashboard-cohort-participant-edit' cohort.id participant.heartsteps_id %}"
                >
                Edit participant information
            </a>
            <h3>Configurations</h3>
            <ul>
            {% for configuration in configurations %}
                <li>
                {{configuration.title}}
                {% if configuration.enabled %}
                (Enabled)
                {% else %}
                (Disabled)
                {% endif %}
                </li>
            {% endfor %}
            </ul>
            {% if participant.is_enabled %}
            <form action="{% url 'dashboard-cohort-participant-disable' cohort.id participant.heartsteps_id %}" method="POST">
                {% csrf_token %}
                <input type="submit" value="Disable participant" />
            </form>
            {% else %}
            <form action="{% url 'dashboard-cohort-participant-enable' cohort.id participant.heartsteps_id %}" method="POST">
                {% csrf_token %}
                <input type="submit" value="Enable participant" />
            </form>
            {% endif %}
        </div>
        <div class="col-sm">
            <nav>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link"
                            href="{% url 'dashboard-cohort-participant-intervention-summary' cohort.id participant.heartsteps_id %}"
                            >
                            Intervention Summary
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"
                            href="{% url 'dashboard-cohort-participant-sms-messages' cohort.id participant.heartsteps_id %}"
                            >
                            Text Messages
                        </a>
                    </li>
                </ul>
            </nav>

            <form action="{% url 'dashboard-cohort-participant-notifications' cohort.id participant.heartsteps_id %}" method="POST">
                {% csrf_token %}
                <input type="hidden" name="message" value="Hi, this is a test message." />
                <input type="submit" value="Send test notification" />
            </form>
        </div>
    </div>
</div>
{% endblock %}
